@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Design System v2.0 - November 2025 */

  /* Base Colors */
  --background: #fafafa;
  --foreground: #1a1a1a;
  --border: #e5e7eb;
  --card-bg: #ffffff;

  /* Primary - Teal (Database/Data Theme) */
  --primary: #0D9488;           /* teal-600 */
  --primary-hover: #0F766E;     /* teal-700 */
  --primary-light: #5EEAD4;     /* teal-300 */
  --primary-dark: #115E59;      /* teal-800 */

  /* Accent - Coral (Energy/Engagement) */
  --accent: #F97316;            /* orange-600 */
  --accent-hover: #EA580C;      /* orange-700 */
  --accent-light: #FDBA74;      /* orange-300 */

  /* Semantic Colors */
  --success: #10b981;           /* emerald-500 */
  --success-hover: #059669;     /* emerald-600 */
  --warning: #f59e0b;           /* amber-500 */
  --error: #ef4444;             /* red-500 */
  --code: #6366F1;              /* indigo-500 */

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  --shadow-teal: 0 10px 30px -5px rgb(13 148 136 / 0.3);
  --shadow-coral: 0 10px 30px -5px rgb(249 115 22 / 0.3);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0f172a;
    --foreground: #f1f5f9;
    --border: #334155;
    --card-bg: #1e293b;

    /* Adjust for dark mode */
    --primary: #2DD4BF;           /* teal-400 */
    --primary-hover: #5EEAD4;     /* teal-300 */
    --accent: #FB923C;            /* orange-400 */
    --accent-hover: #FDBA74;      /* orange-300 */
    --success: #34D399;           /* emerald-400 */
    --success-hover: #6EE7B7;     /* emerald-300 */
    --warning: #FBBF24;           /* amber-400 */
    --error: #F87171;             /* red-400 */
    --code: #818CF8;              /* indigo-400 */
  }
}

html {
  scroll-behavior: smooth;
  /* Prevent black flash by setting persistent background */
  background: linear-gradient(to bottom right, #F0FDFA, #ECFEFF, #DBEAFE);
  min-height: 100vh;
}

body {
  color: var(--foreground);
  /* Use gradient background to match pages and prevent flash */
  background: linear-gradient(to bottom right, #F0FDFA, #ECFEFF, #DBEAFE);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Respect user motion preferences */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto !important;
    }

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Animated gradient backgrounds */
  .gradient-animate {
    background-size: 200% 200%;
    animation: gradient-shift 15s ease infinite;
  }

  @keyframes gradient-shift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  /* Glassmorphism effect */
  .glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .glass-strong {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.5);
  }

  /* Glow effects - Updated for v2.0 */
  .glow-teal {
    box-shadow: 0 0 20px rgba(13, 148, 136, 0.3);
  }

  .glow-coral {
    box-shadow: 0 0 20px rgba(249, 115, 22, 0.3);
  }

  .glow-green {
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
  }

  /* Hover glow animation - Updated for v2.0 */
  .hover-glow-teal:hover {
    box-shadow: 0 0 30px rgba(13, 148, 136, 0.5);
    transition: box-shadow 0.3s ease-in-out;
  }

  .hover-glow-coral:hover {
    box-shadow: 0 0 30px rgba(249, 115, 22, 0.5);
    transition: box-shadow 0.3s ease-in-out;
  }

  .hover-glow-green:hover {
    box-shadow: 0 0 30px rgba(16, 185, 129, 0.5);
    transition: box-shadow 0.3s ease-in-out;
  }

  /* Legacy support - map old colors to new */
  .glow-blue { box-shadow: 0 0 20px rgba(13, 148, 136, 0.3); }
  .glow-purple { box-shadow: 0 0 20px rgba(249, 115, 22, 0.3); }
  .hover-glow-blue:hover { box-shadow: 0 0 30px rgba(13, 148, 136, 0.5); transition: box-shadow 0.3s ease-in-out; }
  .hover-glow-purple:hover { box-shadow: 0 0 30px rgba(249, 115, 22, 0.5); transition: box-shadow 0.3s ease-in-out; }

  /* Shimmer loading effect */
  .shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.2) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2.5s ease-in-out infinite;
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Checkmark draw animation */
  .checkmark-draw {
    stroke-dasharray: 50;
    stroke-dashoffset: 50;
    animation: draw-check 0.6s ease-out forwards;
  }

  @keyframes draw-check {
    to {
      stroke-dashoffset: 0;
    }
  }

  /* Bounce animation */
  .animate-bounce-in {
    animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes bounce-in {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Stagger fade-in animation */
  .stagger-fade-in {
    animation: fade-slide-in 0.4s ease-out forwards;
    opacity: 0;
  }

  @keyframes fade-slide-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Pulse animation */
  .animate-pulse-slow {
    animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-slow {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  /* Loading dots animation */
  .loading-dots span {
    animation: loading-dots 1.4s infinite;
  }

  .loading-dots span:nth-child(2) {
    animation-delay: 0.2s;
  }

  .loading-dots span:nth-child(3) {
    animation-delay: 0.4s;
  }

  @keyframes loading-dots {
    0%, 60%, 100% {
      opacity: 0.3;
      transform: translateY(0);
    }
    30% {
      opacity: 1;
      transform: translateY(-4px);
    }
  }

  /* Scale-in animation */
  .scale-in {
    animation: scale-in 0.3s ease-out;
  }

  @keyframes scale-in {
    from {
      transform: scale(0.8);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Phase 2: Enhanced Micro-interactions & Animations */

  /* Progress bar fill animation with spring effect */
  .progress-fill-animate {
    animation: progress-fill 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    transform-origin: left;
  }

  @keyframes progress-fill {
    from {
      transform: scaleX(0);
    }
    to {
      transform: scaleX(1);
    }
  }

  /* Pulse animation for in-progress badges */
  .pulse-badge {
    animation: pulse-badge 2s ease-in-out infinite;
  }

  @keyframes pulse-badge {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(249, 115, 22, 0.7);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 0 0 8px rgba(249, 115, 22, 0);
    }
  }

  /* Ripple effect for buttons */
  .ripple {
    position: relative;
    overflow: hidden;
  }

  .ripple::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .ripple:active::after {
    width: 300px;
    height: 300px;
  }

  /* Slide down animation for expanding content */
  .slide-down {
    animation: slide-down 0.3s ease-out forwards;
    transform-origin: top;
  }

  @keyframes slide-down {
    from {
      opacity: 0;
      transform: scaleY(0.8) translateY(-10px);
    }
    to {
      opacity: 1;
      transform: scaleY(1) translateY(0);
    }
  }

  /* Tab content transitions */
  .tab-content-container {
    min-height: 400px;
  }

  .tab-content-fade {
    animation: tab-fade-in 0.2s ease-out forwards;
  }

  @keyframes tab-fade-in {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Card entrance with stagger */
  .card-entrance {
    animation: card-entrance 0.5s cubic-bezier(0.34, 1.26, 0.64, 1) forwards;
    opacity: 0;
  }

  @keyframes card-entrance {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* SVG stroke animation for progress circles */
  .progress-circle-animate {
    animation: progress-circle 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  @keyframes progress-circle {
    from {
      stroke-dashoffset: 97.4;
    }
  }

  /* Number count-up effect (enhanced) */
  .number-pop {
    animation: number-pop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes number-pop {
    0% {
      transform: scale(0.8);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }

  /* Phase 3: Advanced Polish */

  /* Smooth scroll behavior */
  .smooth-scroll {
    scroll-behavior: smooth;
  }

  /* Accessibility: Respect prefers-reduced-motion */
  @media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    .shimmer,
    .loading-dots span,
    .pulse-badge,
    .animate-pulse-slow {
      animation: none !important;
    }

    .progress-fill-animate,
    .card-entrance,
    .slide-down,
    .stagger-fade-in,
    .scale-in,
    .progress-circle-animate,
    .tab-content-fade {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }

    .smooth-scroll {
      scroll-behavior: auto !important;
    }
  }
}

@layer components {
  .card {
    @apply bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200;
  }

  /* v2.0 Button Styles - Teal/Coral Theme with Phase 2 Enhancements */
  .btn-primary {
    @apply px-4 py-2.5 bg-gradient-to-r from-teal-600 to-teal-700 text-white font-medium rounded-lg
           hover:from-teal-700 hover:to-teal-800 hover:shadow-lg hover:shadow-teal-500/50
           active:scale-[0.98]
           focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
           transition-all duration-300
           transform hover:scale-105
           ripple;
  }

  .btn-accent {
    @apply px-4 py-2.5 bg-gradient-to-r from-orange-600 to-orange-700 text-white font-medium rounded-lg
           hover:from-orange-700 hover:to-orange-800 hover:shadow-lg hover:shadow-orange-500/50
           active:scale-[0.98]
           focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
           transition-all duration-300
           transform hover:scale-105
           ripple;
  }

  .btn-success {
    @apply px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-green-600 text-white font-medium rounded-lg
           hover:from-emerald-700 hover:to-green-700 hover:shadow-lg hover:shadow-emerald-500/50
           active:scale-[0.98]
           focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
           transition-all duration-300
           transform hover:scale-105
           ripple;
  }

  .btn-secondary {
    @apply px-4 py-2.5 bg-gray-100 text-gray-700 font-medium rounded-lg border border-gray-200
           hover:bg-gray-200 hover:border-gray-300 hover:shadow-md
           active:scale-[0.98]
           focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed
           transition-all duration-200;
  }

  .input-field {
    @apply px-3 py-2 border border-gray-300 rounded-lg 
           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
           transition-all duration-200;
  }
}
